<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>bagas. | Your Brand, Reinvented Through Technology</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Mono&display=swap"
      rel="stylesheet"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="assets/images/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/images/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="assets/images/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="assets/images/favicon/site.webmanifest" />
    <script src="https://cdn.tailwindcss.com/3.4.1"></script>
    <link rel="stylesheet" href="assets/css/styles.css" />
    <script type="module" src="assets/js/js.js"></script>
  </head>
  <body class="bg-[#070B09] text-white font-sans">
    <!-- Navbar -->
    <!-- Navbar -->
    <nav class="sticky top-0 left-0 right-0 z-50 px-4 py-4">
      <div class="max-w-5xl mx-auto flex justify-between items-center h-full">
        <!-- Logo -->
        <div
          class="text-2xl font-normal tracking-wide"
          style="font-family: 'TitleFont'"
        >
          bagas.
        </div>

        <!-- Menu -->
        <ul class="hidden md:flex space-x-6 text-sm font-medium">
          <li>
            <a
              href="#about"
              class="hover:text-[#68cc58] transition font-mono text-base"
              >ABOUT ME</a
            >
          </li>
          <li>
            <a
              href="#portfolio"
              class="hover:text-[#68cc58] transition font-mono text-base"
              >PORTFOLIO</a
            >
          </li>
          <li>
            <a
              href="#experience"
              class="hover:text-[#68cc58] transition font-mono text-base"
              >EXPERIENCE</a
            >
          </li>
          <li>
            <a
              href="#contact"
              class="hover:text-[#68cc58] transition font-mono text-base"
              >CONTACT</a
            >
          </li>
        </ul>

        <!-- Mobile Hamburger -->
        <div class="md:hidden">
          <button id="menu-btn" class="focus:outline-none">
            <svg
              class="w-6 h-6 text-white"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              viewBox="0 0 24 24"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        </div>
      </div>
    </nav>

    <!-- Panel 1: Hitam -->
    <!-- Panel 1: Hitam -->
    <!-- Spacer untuk scroll (tinggi section aslinya) -->
    <div class="h-screen"></div>

    <section
      id="section1"
      class="fixed top-0 left-0 w-full h-screen flex items-center justify-center"
    >
      <div class="relative max-w-5xl w-full px-4">
        <div
          class="absolute top-1/2 inset-x-4 md:inset-x-auto md:left-4 md:max-w-3xl leading-tight font-bold text-white text-5xl md:text-7xl"
          style="font-family: 'MWSans'; transform: translateY(-50%)"
        >
          <span class="select-none">B</span
          ><span class="select-text">uild </span>
          <span class="select-none">A</span
          ><span class="select-text">esthetic </span>
          <span class="select-none">G</span
          ><span class="select-text">rowth</span><br />
          <span class="select-none">A</span
          ><span class="select-text">chieve </span>
          <span class="select-text">
            <span style="display: inline-block">
              <span class="select-none">S</span>
              <span class="s-wrapper">calabilit</span>
              <span class="y-wrapper">
                y
                <img src="assets/images/dot.png" alt="" class="dot-img" />
              </span>
            </span>
          </span>
        </div>
      </div>
    </section>

    <!-- Spacer untuk memberi scroll -->
    <div style="height: 400vh"></div>

    <section
      id="section2"
      style="height: 300vh; background-color: #e4e6ff"
    ></section>

    <!-- <section
      id="section3"
      style="height: 300vh; background-color: #2d348f"
    ></section> -->

    <!-- End Section -->

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="md:hidden hidden px-6 pb-4 space-y-2">
      <a
        href="#about"
        class="block text-sm hover:text-[#68cc58] font-mono text-base"
        >ABOUT ME</a
      >
      <a
        href="#portfolio"
        class="block text-sm hover:text-[#68cc58] font-mono text-base"
        >PORTFOLIO</a
      >
      <a
        href="#experience"
        class="block text-sm hover:text-[#68cc58] font-mono text-base"
        >EXPERIENCE</a
      >
      <a
        href="#contact"
        class="block text-sm hover:text-[#68cc58] font-mono text-base"
        >CONTACT</a
      >
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.31/bundled/lenis.min.js"></script>
    <script src="https://unpkg.com/lenis@1.3.8/dist/lenis.min.js"></script>
    <script>
      // Hapus aturan lama .y-wrapper di semua media query
      for (let i = 0; i < document.styleSheets.length; i++) {
        try {
          const sheet = document.styleSheets[i];
          const rules = sheet.cssRules || sheet.rules;
          for (let j = rules.length - 1; j >= 0; j--) {
            const rule = rules[j];
            if (rule.cssText.includes(".y-wrapper")) {
              sheet.deleteRule(j);
            }
          }
        } catch (e) {
          // skip stylesheet yang tidak bisa diakses karena CORS
        }
      }

      // Buat aturan baru dengan format baris yang dipaksa
      const styleTag = document.createElement("style");
      styleTag.innerHTML = `

/* Styling untuk y-wrapper */
.y-wrapper {
  position: relative;
  display: inline-block;
  margin-left: -0.6rem; /* default (mobile) */
}

@media (min-width: 1025px) {
  .y-wrapper {
    margin-left: -0.9rem; /* untuk PC */
  }
}

/* Default (Mobile) */
.s-wrapper {
  position: relative;
  display: inline-block;
  margin-left: -0.6rem;
}

/* PC / Desktop (â‰¥1024px) */
@media (min-width: 1024px) {
  .s-wrapper {
    margin-left: -0.9rem;
  }
}

`;

      document.head.appendChild(styleTag);
    </script>
    <script>
      gsap.registerPlugin(ScrollTrigger);
      const navbar = document.querySelector("nav");

      // Pastikan navbar tetap di atas walau Lenis mengatur scroll
      function keepNavbarOnTop() {
        // Ambil posisi scroll asli dari Lenis
        const scrollTop = window.scrollY || document.documentElement.scrollTop;
        navbar.style.transform = `translateY(${scrollTop}px)`;
      }
      function updateNavbarColor() {
        const navHeight = navbar.offsetHeight;
        const midY = navHeight / 2; // titik tengah navbar di Y

        // Ambil elemen yang ada di belakang navbar pada titik tengah
        const elem = document.elementFromPoint(window.innerWidth / 2, midY);

        if (elem) {
          const bgColor = window.getComputedStyle(elem).backgroundColor;

          // Ambil brightness warna (0=hitam, 255=putih)
          const rgb = bgColor.match(/\d+/g).map(Number);
          const brightness = rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114;

          // Tentukan warna teks
          if (brightness > 150) {
            navbar.classList.add("nav-black");
            navbar.classList.remove("nav-white");
          } else {
            navbar.classList.add("nav-white");
            navbar.classList.remove("nav-black");
          }
        }
      }

      const lenis = new Lenis({
        duration: 1.5, // makin besar makin lambat (default 1.2)
        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)), // easing halus
        smoothWheel: true,
        smoothTouch: true,
      });

      // Sinkronkan Lenis dengan GSAP
      function raf(time) {
        lenis.raf(time);
        keepNavbarOnTop();
        updateNavbarColor();
        requestAnimationFrame(raf);
      }
      requestAnimationFrame(raf);

      lenis.on("scroll", ScrollTrigger.update);

      const dot = document.querySelector(".dot-img");
      const rect = dot.getBoundingClientRect();
      const centerX = window.innerWidth / 2;
      const centerY = window.innerHeight / 2;

      // Hitung jarak dari posisi awal dot ke tengah layar
      const offsetX = centerX - (rect.left + rect.width / 2);
      const offsetY = centerY - (rect.top + rect.height / 2);

      // Hitung ukuran lingkaran yang dibutuhkan untuk nutup layar diagonal
      const diagonal = Math.sqrt(
        window.innerWidth ** 2 + window.innerHeight ** 2
      );
      const initialSize = rect.width;
      const neededScale = diagonal / (initialSize / 2);

      // Tinggi dari posisi dot-img ke top body
      const topDistance = rect.top;

      // Satu animasi dengan keyframes
      gsap.to(".dot-img", {
        scrollTrigger: {
          trigger: document.body,
          start: "top top",
          end: "+=1500",
          scrub: 1,
          markers: true,
          onRefresh: (self) => {
            self.start -= 50;
            self.end -= 50;
          },
          onLeave: () => {
            gsap.to("#section2", { autoAlpha: 1, duration: 1 });
          },
          onEnterBack: () => {
            gsap.to("#section2", { autoAlpha: 0, duration: 0.5 });
          },
        },
        keyframes: [
          {
            // fase 1 - geser ke tengah + scale awal sampai nyentuh top body
            x: offsetX,
            y: offsetY,
            scale: neededScale * 0.5, // skala sementara sebelum full
            ease: "none",
            duration: topDistance / 400, // proporsi durasi dari total scroll
          },
          {
            // fase 2 - hanya scale lanjut, Y tetap
            x: offsetX,
            y: offsetY - topDistance, // Y tetap di posisi saat sudah nyentuh atas
            scale: neededScale,
            ease: "none",
            duration: 1 - topDistance / 400,
          },
        ],
      });

      // awalnya section2 disembunyikan
      gsap.set("#section2", { autoAlpha: 0 });
    </script>

    <!-- JS toggle menu -->
    <script>
      const btn = document.getElementById("menu-btn");
      const menu = document.getElementById("mobile-menu");
      btn.addEventListener("click", () => {
        menu.classList.toggle("hidden");
      });
    </script>
    <div id="cursor-circle"></div>
  </body>
</html>
